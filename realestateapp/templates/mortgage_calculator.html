{% extends "base.html" %}
{% load static %}

{% block title %}Mortgage Calculator{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
{% endblock %}

{% block content %}
<div class="calculator-container">
    <h2 class="calculator-title">Mortgage Calculator</h2>
    <div class="calculator-layout">
        <div class="input-column">
            <div class="input-group-section">
                <h3>Property Details</h3>
                <div class="input-group slider-group">
                    <label for="homePrice">Home Price: <span id="homePriceValue">${{ calculation.home_price }}</span></label>
                    <input type="range" id="homePrice" name="homePrice" min="50000" max="1000000" step="1000" value="{{ calculation.home_price }}">
                </div>
                <div class="input-group">
                    <label for="downPayment">Down Payment:</label>
                    <input type="number" id="downPayment" name="downPayment" value="{{ calculation.down_payment }}">
                </div>
                <div class="input-group">
                    <label for="closingCosts">Closing Costs (%):</label>
                    <input type="number" id="closingCosts" name="closingCosts" value="{{ calculation.closing_costs }}" step="0.1">
                    <span id="closingCostsValue">{{ calculation.closing_costs }}%</span>
                    <span id="closingCostsDollar"></span>
                </div>
            </div>
            <div class="input-group-section">
                <h3>Loan Details</h3>
                <div class="input-group">
                    <label for="loanTerm">Loan Term (years):</label>
                    <select id="loanTerm" name="loanTerm">
                        <option value="15" {% if calculation.loan_term == 15 %}selected{% endif %}>15</option>
                        <option value="30" {% if calculation.loan_term == 30 %}selected{% endif %}>30</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="interestRate">Interest Rate (%):</label>
                    <input type="number" id="interestRate" name="interestRate" value="{{ calculation.interest_rate }}" step="0.01">
                </div>
            </div>
        </div>
        <div class="input-column">
            <div class="input-group-section">
                <h3>Additional Costs</h3>
                <div class="input-group">
                    <label for="propertyTax">Property Tax (% per year):</label>
                    <input type="number" id="propertyTax" name="propertyTax" value="{{ calculation.property_tax }}" step="0.01">
                </div>
                <div class="input-group">
                    <label for="insurance">Insurance (% per year):</label>
                    <input type="number" id="insurance" name="insurance" value="{{ calculation.insurance_rate }}" step="0.01">
                </div>
                <div class="input-group">
                    <label for="hoa">HOA (monthly):</label>
                    <input type="number" id="hoa" name="hoa" value="{{ calculation.hoa }}">
                </div>
            </div>
            <div class="input-group-section">
                <h3>Utilities</h3>
                <div class="input-group">
                    <label for="gas">Gas (monthly):</label>
                    <input type="number" id="gas" name="gas" value="{{ calculation.gas }}">
                </div>
                <div class="input-group">
                    <label for="electricity">Electricity (monthly):</label>
                    <input type="number" id="electricity" name="electricity" value="{{ calculation.electricity }}">
                </div>
                <div class="input-group">
                    <label for="internet">Internet (monthly):</label>
                    <input type="number" id="internet" name="internet" value="{{ calculation.internet }}">
                </div>
                <div class="input-group">
                    <label for="waterTrash">Water & Trash (monthly):</label>
                    <input type="number" id="waterTrash" name="waterTrash" value="{{ calculation.water_trash }}">
                </div>
            </div>
            <div class="input-group-section">
                <h3>Savings</h3>
                <div class="input-group">
                    <label for="person1Contribution">Person 1 Contribution:</label>
                    <input type="number" id="person1Contribution" name="person1Contribution" value="{{ calculation.person1_contribution }}">
                </div>
                <div class="input-group">
                    <label for="person2Contribution">Person 2 Contribution:</label>
                    <input type="number" id="person2Contribution" name="person2Contribution" value="{{ calculation.person2_contribution }}">
                </div>
                <div class="input-group">
                    <label for="savingsGoal">Savings Goal:</label>
                    <input type="number" id="savingsGoal" name="savingsGoal" value="{{ calculation.savings_goal }}">
                </div>
            </div>
        </div>
        <div class="chart-column">
            <div class="chart-container">
                <canvas id="homePriceChart"></canvas>
            </div>
            <div class="results-summary">
                <p id="loanAmount">Loan Amount: $0</p>
                <p id="monthlyCost">Total Monthly Cost: $0</p>
                <p id="totalSavings">Total Savings: $0</p>
                <p id="goalMetMonth">Goal Met Month: -</p>
            </div>
        </div>
    </div>
    <div class="save-button-container">
        <button id="saveButton" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">
            Save Calculation
        </button>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'scripts.js' %}"></script>
{% endblock %}